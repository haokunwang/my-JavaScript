<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>时钟</title>
    <style>
    *{
        margin:0;padding:0;
    }
    ul,li{
       list-style:none;
    }
    .timer{
        width:1000px;
        position: relative;
        margin:0 auto;
        margin-top: 200px;
    }
    .timer li{
        width:122px;
        height:172px;
        float:left;
        overflow: hidden; 
    }
    .timer li img{
        position:relative;
        width:122px;
        height:172px;
    }
    
    </style>
    <script>
    window.onload=function(){
       
        var oImg=document.querySelectorAll(".timer li img");                                     
        var Timer=null;
        var shake=0;
        upDate();
        Timer=setInterval(function(){
            upDate();
        },1000);

    function upDate(){
        var Time=new Date();
        var Hours=Time.getHours();
        var Min=Time.getMinutes();
        var Sec=Time.getSeconds();
        var timeStr=addZero(Hours)+":"+addZero(Min)+":"+addZero(Sec);
        
        for(var i=0;i<oImg.length/2;i++){
            if(i%3==2){
                if(shake){
                    oImg[2*i].src="timer/no.jpg";
                    oImg[2*i+1].src="timer/no.jpg";
                    if(i==5){
                        shake=0;
                    }
                }else{
                    oImg[2*i].src="timer/colon.jpg";
                    oImg[2*i+1].src="timer/colon.jpg"; 
                    if(i==5){
                        shake=1;
                    }
                }
               
            }else{
                if(oImg[2*i].now){
                    if(oImg[2*i].now!=Number(timeStr.charAt(i))){//如果值改变了
                        doMove(oImg[2*i],oImg[2*i+1],timeStr.charAt(i));
                        console.log(timeStr.charAt(i));
                    }
                }else{
                    oImg[2*i].src="timer/"+(Number(timeStr.charAt(i)))%10+".jpg";
                    oImg[2*i+1].src="timer/"+(Number(timeStr.charAt(i))+1)%10+".jpg";
                    oImg[2*i].now=Number(timeStr.charAt(i));
                }
            }
                
        }
    }

        function addZero(num){
            return num<10?"0"+num:""+num;

        }
        function doMove(obj1,obj2,timeStr){
            //首先img[0],img[1]向上走,走完后img[0]img[1]换数字下来;
     
                clearInterval(obj1.timer);
                var go_top=0;

                obj1.timer=setInterval(function(){
                go_top<-170?go_top=-172:go_top-=5;
                obj1.style["top"]=go_top+"px";
                obj2.style["top"]=go_top+"px";
                if(go_top<=-172){
                    obj1.src="timer/"+(Number(timeStr))%10+".jpg"; 
                    obj2.src="timer/"+ (Number(timeStr)+1)%10+".jpg";
                    obj1.now=Number(timeStr);
                    obj1.style["top"]=0+"px";
                    obj2.style["top"]=0+"px";   
                    clearInterval(obj1.timer);                                  
                    }
                },20);
            
            

        }
    }

        
    


    </script>
</head>
<body>
    <ul class="timer">
        <li><img src="timer/0.jpg" alt="">
            <img src="timer/0.jpg" alt="">
        </li>
        <li><img src="timer/0.jpg" alt="">
            <img src="timer/0.jpg" alt="">
        </li>
        <li><img src="timer/colon.jpg" alt="">
            <img src="timer/colon.jpg" alt="">
        </li>
        <li><img src="timer/0.jpg" alt="">
            <img src="timer/0.jpg" alt="">
        </li>
        <li><img src="timer/0.jpg" alt="">
            <img src="timer/0.jpg" alt="">
        </li>
        <li><img src="timer/colon.jpg" alt="">
            <img src="timer/colon.jpg" alt="">
        </li>
        <li><img src="timer/0.jpg" alt="">
            <img src="timer/0.jpg" alt="">
        </li>
        <li><img src="timer/0.jpg" alt="">
            <img src="timer/0.jpg" alt="">
        </li>
    </ul>
</body>
</html>